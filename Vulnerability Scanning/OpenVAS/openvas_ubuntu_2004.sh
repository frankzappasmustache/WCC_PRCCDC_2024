#!/bin/bash

# Update package index
sudo apt update

# Install required packages
sudo apt install -y software-properties-common

# Add the OpenVAS repository
sudo add-apt-repository ppa:mrazavi/openvas

# Update package index again
sudo apt update

# Install OpenVAS packages
sudo apt install -y openvas9

# Install Greenbone Security Assistant (GSA) for web interface
sudo apt install -y gvm

# Setup OpenVAS
sudo gvm-setup

# Start OpenVAS services
sudo systemctl start openvas-scanner
sudo systemctl start openvas-manager
sudo systemctl start gsad

# Enable OpenVAS services to start on boot
sudo systemctl enable openvas-scanner
sudo systemctl enable openvas-manager
sudo systemctl enable gsad

# Open port 443 in firewall for web interface
sudo ufw allow 443/tcp
